{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/utils.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/astParser.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/init.js","../../src/index.js"],"sourcesContent":["const originArrMethods = Array.prototype,\n      newArrMethods = Object.create(originArrMethods);\n\nconst ARR_METHODS = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'reverse',\n  'sort',\n  'splice'\n];\n\nARR_METHODS.map((method) => {\n  newArrMethods[method] = function (...args) {\n    const result = originArrMethods[methods].apply(this, args),\n          ob = this.__ob__;\n\n    let newArr;\n\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        newArr = args;\n        break;\n      case 'splice':\n        newArr = args.slice(2);\n        break;\n      default:\n        break;\n    }\n\n    if (newArr) ob.observeArr(newArr);\n\n    return result;\n  }\n})\n\nexport {\n  newArrMethods\n}","function proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newValue) {\n      if (vm[target][key] === newValue) return;\n      vm[target][key] = newValue;\n    }\n  })\n}\n\nfunction isObject (value) {\n  return typeof value === 'object' && value !== null;\n}\n\nfunction isArray (value) {\n  return Array.isArray(value);\n}\n\nfunction setConstantProperty (data, key, value) {\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    value\n  });\n}\n\nexport {\n  proxy,\n  isObject,\n  isArray,\n  setConstantProperty\n}","import { newArrMethods } from \"./array\";\nimport { isObject, isArray, setConstantProperty } from '../utils';\n\nclass Observer {\n  \n  constructor(data) {\n    setConstantProperty(data, '__ob__', this);\n\n    if (isArray(data)) {\n      data.__proto__ = newArrMethods;\n      this.observeArr(data);\n    } else {\n      this.walk(data);\n    }\n  }\n\n  walk (data) {\n    const keys = Object.keys(data);\n\n    keys.map((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n\n  observeArr (data) {\n    data.map((item) => {\n      observe(item);\n    });\n  }\n}\n\nfunction defineReactive (data, key, value) {\n  observe(value);\n  Object.defineProperty(data, key, {\n    get () {\n      console.log('响应式获取：' + value);\n      return value;\n    },\n    set (newValue) {\n      if (value === newValue) return;\n      console.log('响应式设置：' + key + ' = ' + newValue);\n      observe(newValue);\n      value = newValue;\n    }\n  }) \n}\n\nfunction observe (data) {\n  if (!isObject(data) || data.__ob__) { \n    return data;\n  }\n\n  new Observer(data);\n}\n\nexport {\n  observe\n}","import { observe } from \"./observer\";\nimport { proxy } from './utils';\n\nfunction initState (vm) {\n  const options = vm.$options;\n\n  if (options.props) {\n    initProps(vm);\n  }\n\n  if (options.methods) {\n    initMethods(vm);\n  }\n\n  if (options.data) {\n    initData(vm);\n  }\n\n  if (options.computed) {\n    initComputed(vm);\n  }\n\n  if (options.watch) {\n    initWatch(vm);\n  }\n}\n\nfunction initProps (vm) {}\n\nfunction initMethods (vm) {}\n\nfunction initData (vm) {\n  let data = vm.$options.data;\n\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data;\n  \n  for (let key in data) {\n    proxy(vm, '_data', key);\n  }\n  \n  observe(data);\n}\n\nfunction initWatch (vm) {}\n\nfunction initComputed (vm) {}\n\nexport {\n  initState\n}","// 属性匹配，可以匹配 id=\"app\" id='app' id=app\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\n// 标签名匹配\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\n// 匹配特殊标签名，比如：<my:header></my:header>\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\n// 开始标签左侧<匹配，比如：<div\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\n// 开始标签右侧>匹配，比如：>或/>\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\n// 整个结束标签，比如</div>\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\n\r\n/* \r\n\r\n  <div id=\"app\" style=\"color: red;font-size: 20px;\">\r\n    你好，{{name}}\r\n    <span class=\"text\" style=\"color: green;\">{{age}}</span>\r\n  </div>\r\n\r\n**/\r\n\r\n// 这个文件的功能是根据html（注意这个html是个字符串来的，不是真实DOM）来生成AST\r\n\r\n// *** 说明：\r\n// string.match()方法用于匹配字符串，会返回一个数组，只要匹配到一个就会停止匹配\r\n\r\n// 1、通过正则来匹配开始标签的左侧<，如果匹配到，则从html中删除，并创建一个对象\r\n// 2、之后再判断紧接着的是不是>或者/>，如果是就代表该标签没有属性，如果不是则代表这个标签有属性\r\n// 3、处理属性。匹配到的属性会以一个对象形式放到数组attrs中，然后把匹配了的内容删除掉\r\n\r\n\r\nfunction parseHtmlToAst(html){\r\n  console.log(html)\r\n  // 生成AST中三个比较重要的变量：\r\n  // root: 作为一个AST中的根节点\r\n  // currentParent: 当前解析到的标签的父元素\r\n  // stack：标签栈，用来记录解析的元素，使父子元素关系比较可视化，也方便操作。索引值为0的元素为最外层元素\r\n  let text, root, currentParent, stack = [];\r\n  while(html){\r\n    let textEnd = html.indexOf('<');\r\n    if(textEnd === 0){\r\n      // 标签\r\n      // 开始标签\r\n      const startTagMatch = parseStartTag();\r\n      if(startTagMatch){\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue;\r\n      }\r\n      // 结束标签\r\n      const endTagMatch = html.match(endTag);\r\n      if(endTagMatch){\r\n        advance(endTagMatch[0].length);\r\n        end(endTagMatch[1])\r\n        continue;\r\n      }\r\n    }\r\n    if(textEnd > 0){\r\n      // 文本\r\n      text = html.substring(0,textEnd)\r\n      if(text){\r\n        advance(text.length);\r\n        chars(text);\r\n      }\r\n    }\r\n  }\r\n\r\n  function parseStartTag(){\r\n    const start = html.match(startTagOpen);\r\n    let end, attr;\r\n    if(start){\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      // 匹配到标签之后删除\r\n      advance(start[0].length)\r\n      while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\r\n        // 这里是处理标签的属性的\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n          // 这里是因为如果是id=\"app\" id='app' id=app，他们的位置都不一样\r\n        })\r\n        advance(attr[0].length)\r\n      }\r\n      if(end){\r\n        // 到这里就是整个开始标签（包含标签和属性）都解析完了\r\n        advance(end[0].length);\r\n        return match;\r\n      }\r\n    }\r\n  }\r\n\r\n  function advance(n){\r\n    html = html.substring(n);\r\n  }\r\n\r\n  // 处理开始标签\r\n  // stack [div,span]\r\n  // 用stack可以方便记录低元素之间父子关系\r\n  // 在这个stack数组中，从左往右，元素是一个个嵌套的，索引值为0的元素为最外层元素\r\n  function start(tagName, attrs){\r\n    const element = createASTElement(tagName,attrs)\r\n    if(!root){\r\n      root = element;\r\n    }\r\n    currentParent = element;\r\n    // 把当前的标签节点推到stack中\r\n    stack.push(element);\r\n  }\r\n  \r\n  // 处理结束标签 \r\n  // stack [div,span] --> 取出span --> [div]，currentParent设置为div\r\n  function end(tagName){\r\n    // 取出结束标签\r\n    const element = stack.pop();\r\n    // 取出之后把currentParent当前父亲 设置为stack中倒数第一个元素\r\n    currentParent = stack[stack.length - 1];\r\n    if(currentParent){\r\n      // 如果有currentParent，则把刚刚弹出来的标签的parent设置为currentParent\r\n      // 比如[div,span]，把span弹出了，此时currentParent为div，然后把div设置为span的parent，合理！\r\n      element.parent = currentParent;\r\n      // 然后把element推到currentParent的children中\r\n      currentParent.children.push(element);\r\n    }\r\n  }\r\n  \r\n  // 处理文本\r\n  function chars(text){\r\n    text = text.trim();\r\n    if(text.length > 0){\r\n      currentParent.children.push({\r\n        type: 3,\r\n        text\r\n      })\r\n    }\r\n  }\r\n  \r\n  // 在AST中创建元素节点\r\n  function createASTElement(tagName, attrs){\r\n    return {\r\n      tag: tagName,\r\n      type: 1,\r\n      children: [],\r\n      attrs,\r\n      parent\r\n    }\r\n  }\r\n  return root;\r\n}\r\n\r\n\r\nexport {\r\n  parseHtmlToAst\r\n}","/*\r\n  <div id=\"app\" style=\"color: red;font-size: 20px;\">\r\n    你好，{{name}}\r\n    <span class=\"text\" style=\"color: green;\">{{age}}</span>\r\n  </div>\r\n\r\n  创建元素： _c() --> createElement()\r\n  创建文本： _v() --> createTextNode()\r\n  解析Mustache插值： _s() --> {{name}} --> -S(name)\r\n**/\r\n\r\n// 我们要生成以下这堆东西\r\n// function vrender(){\r\n//   return `\r\n//     _c(\r\n//       \"div\",\r\n//       {\r\n//         \"id\": \"app\", \r\n//         \"style\": { \r\n//           \"color\": \"red\", \r\n//           \"font-size\": \"20px\" \r\n//         }\r\n//       },\r\n//       _v(\"你好，\"+_s(name)),\r\n//       _c(\r\n//         \"span\",\r\n//         {\r\n//           \"class\": \"text\", \r\n//           \"style\": { \r\n//             \"color\": \"green\" \r\n//           }\r\n//         },\r\n//         _v(_s(age))\r\n//       )\r\n//     )\r\n//   `;\r\n// }\r\n\r\nfunction formatProps(attrs){\r\n  let attrStr = '';\r\n  for(let i=0;i<attrs.length;i++){\r\n    let attr = attrs[i];\r\n    if(attr.name === 'style'){\r\n      let styleAttrs = {};\r\n      attr.value.split(';').forEach(styleAttr => {\r\n        let [key, value] = styleAttr.split(':');\r\n        styleAttrs[key] = value;\r\n      })\r\n      attr.value = styleAttrs;\r\n    }\r\n    attrStr += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  console.log(`{${attrStr.slice(0, -1)}}`)\r\n  return `{${attrStr.slice(0, -1)}}`\r\n}\r\n\r\nfunction generate(el){\r\n  console.log(el)\r\n  let code = `\r\n    _c('${el.tag}',${ el.attrs.length > 0 ? `${formatProps(el.attrs)}` : 'undefined' })\r\n  `;\r\n}\r\n\r\nexport {\r\n  generate\r\n}","import { parseHtmlToAst } from './astParser';\r\nimport { generate } from './generate';\r\n\r\n// 这个方法是将html转换成render函数\r\nfunction compileToRenderFunction(html){\r\n  // parseHtmlToAst()将html先转换成AST\r\n  const ast = parseHtmlToAst(html);\r\n  const code = generate(ast);\r\n}\r\n\r\nexport {\r\n  compileToRenderFunction\r\n}","import { initState } from \"./state\";\nimport { compileToRenderFunction } from './compiler';\n// import { mountComponent } from './lifecycle';\n\nfunction initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n\n    vm.$options = options;\n\n    initState(vm);\n\n    if (vm.$options.el) {\n      // 挂载函数   Vue.prototype.$mount\n      vm.$mount(vm.$options.el);\n    }\n  }\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this,\n          options = vm.$options;\n    \n    el = document.querySelector(el),\n    vm.$el = el;\n\n    if (!options.render) {\n      let template = options.template;\n\n      if (!template && el) {\n        // dom.outerHTML包含自己，而dom.innerHTML不包含自己\n        template = el.outerHTML;\n      }\n\n      const render = compileToRenderFunction(template);\n      options.render = render;\n    }\n\n    // mountComponent(vm);\n  } \n}\n\nexport {\n  initMixin\n}","import { initMixin } from './init';\n// import { lifecycleMixin } from './lifecycle';\n// import { renderMixin } from './vdom';\n\nfunction Vue (options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\n// lifecycleMixin(Vue);\n// renderMixin(Vue);\n\nexport default Vue;\n\n"],"names":["originArrMethods","Array","prototype","newArrMethods","Object","create","ARR_METHODS","map","method","args","result","methods","apply","ob","__ob__","newArr","slice","observeArr","proxy","vm","target","key","defineProperty","get","set","newValue","isObject","value","isArray","setConstantProperty","data","enumerable","configurable","Observer","constructor","__proto__","walk","keys","defineReactive","item","observe","console","log","initState","options","$options","props","initData","computed","watch","_data","call","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHtmlToAst","html","text","root","currentParent","stack","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","length","end","substring","chars","attr","push","name","n","element","createASTElement","pop","parent","children","trim","type","tag","formatProps","attrStr","i","styleAttrs","split","forEach","styleAttr","JSON","stringify","generate","el","compileToRenderFunction","ast","initMixin","Vue","_init","$mount","document","querySelector","$el","render","template","outerHTML"],"mappings":"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"}